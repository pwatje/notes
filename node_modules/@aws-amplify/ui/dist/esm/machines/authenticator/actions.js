import{__assign as r,__awaiter as e,__generator as n}from"tslib";import{Auth as t}from"aws-amplify";import{assign as o,stop as u}from"xstate/lib/actions";var a=function(r){return u(r)},i=o({attributeToVerify:function(r){}}),c=o({challengeName:function(r){}}),s=o({requiredAttributes:function(r){}}),d=o({remoteError:function(r){return""}}),f=o({formValues:function(r){return{}}}),l=o({touched:function(r){return{}}}),m=o({unverifiedContactMethods:function(r){}}),v=o({username:function(r){}}),h=o({validationError:function(r){return{}}}),V=o({challengeName:function(r,e){var n;return null===(n=e.data)||void 0===n?void 0:n.challengeName}}),p=o({requiredAttributes:function(r,e){var n,t;return null===(t=null===(n=e.data)||void 0===n?void 0:n.challengeParam)||void 0===t?void 0:t.requiredAttributes}}),b=o({redirectIntent:function(r){return"confirmPasswordReset"}}),g=o({redirectIntent:function(r){return"confirmSignUp"}}),y=o({authAttributes:function(r,e){var n,t,o=r.loginMechanisms[0];return{username:null!==(n=r.formValues[o])&&void 0!==n?n:r.formValues.username,password:null===(t=r.formValues)||void 0===t?void 0:t.password}}}),_=o({validationError:function(r,e){return e.data}}),w=o({remoteError:function(r,e){var n;return"NoUserPoolError"===e.data.name?"Configuration error (see console) â€“ please contact the administrator":(null===(n=e.data)||void 0===n?void 0:n.message)||e.data}}),A=o({unverifiedContactMethods:function(r,e){return e.data.unverified}}),E=o({user:function(r,e){return e.data.user||e.data}}),D=o({username:function(r,e){var n=r.formValues,t=n.username,o=n.country_code;return o&&(t="".concat(o).concat(t)),t}}),M=o({codeDeliveryDetails:function(r,e){return e.data.codeDeliveryDetails}}),N=o({authAttributes:function(r,e){return{username:r.formValues.username}}}),P=o({formValues:function(e,n){var t,o=n.data,u=o.name,a=o.value;return r(r({},e.formValues),((t={})[u]=a,t))}}),q=o({formValues:function(e,n){return r(r({},e.formValues),n.data)}}),C=o({touched:function(e,n){var t,o=n.data.name;return r(r({},e.touched),((t={})["".concat(o)]=!0,t))}}),x=function(r){return e(void 0,void 0,void 0,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return e=r.username,[4,t.forgotPassword(e)];case 1:return[2,n.sent()]}}))}))},I=o({formValues:function(e,n){var t,o,u=e.loginMechanisms[0],a=void 0===u?"username":u;if(!e.formValues.phone_number&&"phone_number"!==a)return e.formValues;var i=e.formValues,c=e.country_code,s=i.phone_number?"phone_number":"username",d="".concat(null!==(o=i.country_code)&&void 0!==o?o:c).concat(i[s]).replace(/[^A-Z0-9+]/gi,""),f=r(r({},i),((t={})[s]=d,t));return delete f.country_code,f}});export{i as clearAttributeToVerify,c as clearChallengeName,d as clearError,f as clearFormValues,s as clearRequiredAttributes,l as clearTouched,m as clearUnverifiedContactMethods,v as clearUsername,h as clearValidationError,C as handleBlur,P as handleInput,q as handleSubmit,I as parsePhoneNumber,x as resendCode,V as setChallengeName,M as setCodeDeliveryDetails,b as setConfirmResetPasswordIntent,g as setConfirmSignUpIntent,y as setCredentials,_ as setFieldErrors,w as setRemoteError,p as setRequiredAttributes,A as setUnverifiedContactMethods,E as setUser,D as setUsername,N as setUsernameAuthAttributes,a as stopActor};
