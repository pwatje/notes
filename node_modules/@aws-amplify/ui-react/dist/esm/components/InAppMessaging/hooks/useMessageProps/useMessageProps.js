import{useRef as e,useEffect as t,useMemo as r}from"react";import s from"lodash/isEmpty";import a from"../useMessageImage/useMessageImage.js";import{getPayloadStyle as o,getMessageStyles as n}from"./utils.js";function m(m){const{image:u,onDisplay:l,primaryButton:i,secondaryButton:y}=m,c=e(!1),{hasRenderableImage:d,isImageFetching:g}=a(u),p=!g;t((()=>{!c.current&&p&&(null==l||l(),c.current=!0)}),[l,p]);const h=!s(i),f=!s(y),B=h||f,I=r((()=>{if(!p)return null;const e=o(m),t=m.style;return n({styleParams:{payloadStyle:e,overrideStyle:t}})}),[m,p]);return{hasButtons:B,hasPrimaryButton:h,hasRenderableImage:d,hasSecondaryButton:f,shouldRenderMessage:p,styles:I}}export{m as default};
