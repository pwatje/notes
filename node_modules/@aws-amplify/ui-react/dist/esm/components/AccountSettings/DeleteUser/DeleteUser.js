import{__awaiter as i}from"tslib";import{jsxs as e,jsx as t}from"react/jsx-runtime";import r from"react";import{getLogger as s,translate as o,deleteUser as m}from"@aws-amplify/ui";import{useAuth as p}from"../../../hooks/useAuth.js";import"@aws-amplify/datastore";import"@aws-amplify/storage";import"classnames";import"../../../primitives/shared/constants.js";import"../../../primitives/View/View.js";import"aws-amplify";import"../../../primitives/Alert/Alert.js";import"../../../primitives/Autocomplete/Autocomplete.js";import"../../../primitives/Badge/Badge.js";import"../../../primitives/Button/Button.js";import"../../../primitives/ButtonGroup/ButtonGroup.js";import"../../../primitives/Card/Card.js";import"../../../primitives/CheckboxField/CheckboxField.js";import"../../../primitives/Collection/Collection.js";import"../../../primitives/Divider/Divider.js";import"../../../primitives/Expander/Expander.js";import"../../../primitives/Expander/ExpanderItem.js";import"../../../primitives/FieldGroupIcon/FieldGroupIcon.js";import"../../../primitives/FieldGroupIcon/FieldGroupIconButton.js";import{Flex as l}from"../../../primitives/Flex/Flex.js";import"../../../primitives/Grid/Grid.js";import"../../../primitives/Heading/Heading.js";import"../../../primitives/HighlightMatch/HighlightMatch.js";import"../../../primitives/Icon/Icon.js";import"../../../primitives/Image/Image.js";import"../../../primitives/Link/Link.js";import"../../../primitives/Loader/Loader.js";import"../../../primitives/Menu/Menu.js";import"../../../primitives/Menu/MenuButton.js";import"../../../primitives/Menu/MenuItem.js";import"../../../primitives/Pagination/Pagination.js";import"../../../primitives/PasswordField/PasswordField.js";import"../../../primitives/PhoneNumberField/PhoneNumberField.js";import"../../../primitives/Placeholder/Placeholder.js";import"../../../primitives/Radio/Radio.js";import"../../../primitives/RadioGroupField/RadioGroupField.js";import"../../../primitives/Rating/Rating.js";import"../../../primitives/ScrollView/ScrollView.js";import"../../../primitives/SearchField/SearchField.js";import"../../../primitives/SelectField/SelectField.js";import"../../../primitives/SliderField/SliderField.js";import"../../../primitives/StepperField/StepperField.js";import"../../../primitives/SwitchField/SwitchField.js";import"../../../primitives/Table/Table.js";import"../../../primitives/Table/TableBody.js";import"../../../primitives/Table/TableCell.js";import"../../../primitives/Table/TableFoot.js";import"../../../primitives/Table/TableHead.js";import"../../../primitives/Table/TableRow.js";import"../../../primitives/Tabs/Tabs.js";import"../../../primitives/Text/Text.js";import"../../../primitives/TextAreaField/TextAreaField.js";import"../../../primitives/TextField/TextField.js";import"../../../primitives/ToggleButton/ToggleButton.js";import"../../../primitives/ToggleButtonGroup/ToggleButtonGroup.js";import"../../../primitives/VisuallyHidden/VisuallyHidden.js";import{ComponentClassName as a}from"../constants.js";import n from"./defaults.js";const d=s("Auth");function u({components:s,onSuccess:u,onError:j,handleDelete:c}){const[v,g]=r.useState("IDLE"),[F,T]=r.useState(null),b=o("Delete Account"),{user:h,isLoading:I}=p(),{ErrorMessage:E,DeleteButton:D,WarningView:f}=r.useMemo((()=>Object.assign(Object.assign({},n),null!=s?s:{})),[s]),w=r.useCallback((()=>i(this,void 0,void 0,(function*(){g("DELETING"),F&&T(null);try{c?yield c(h):yield m(),g("DONE"),null==u||u()}catch(i){const e=i;g("ERROR"),T(e.message),null==j||j(e)}}))),[F,c,j,u,h]),x=r.useCallback((()=>{g("IDLE")}),[]),B=r.useCallback((()=>{w()}),[w]);return I?null:h?"DONE"===v?null:e(l,Object.assign({className:a.DeleteUser,direction:"column"},{children:[t(D,Object.assign({isDisabled:"CONFIRMATION"===v||"DELETING"===v,onClick:i=>{i.preventDefault(),g("CONFIRMATION")}},{children:b})),"CONFIRMATION"===v||"DELETING"===v?t(f,{onCancel:x,isDisabled:"DELETING"===v,onConfirm:B}):null,F?t(E,{children:F}):null]})):(d.warn("<DeleteUser /> requires user to be authenticated."),null)}u.ErrorMessage=n.ErrorMessage,u.DeleteButton=n.DeleteButton,u.WarningView=n.WarningView;export{u as default};
