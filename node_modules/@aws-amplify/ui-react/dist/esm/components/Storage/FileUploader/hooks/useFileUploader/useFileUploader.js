import{returnAcceptedFiles as e,checkMaxSize as t}from"@aws-amplify/ui";import{useState as r}from"react";function a({maxSize:a,acceptedFileTypes:n,hasMultipleFiles:o,isLoading:s,setAutoLoad:i}){const[l,f]=r([]),[p,g]=r(!1),[u,c]=r(!1),h=(e,r)=>{const n=[...r];[...e].forEach((e=>{const r=t(a,e);n.unshift({fileState:r?"error":null,fileErrors:r,file:e,name:e.name})})),f(n)},D=t=>{const r=e([...t],n);return r?!o&&l.length>0?l.length:o||1!=r.length?!o&&r.length>1?(h([r[0]],l),1):r.length>0?(h([...r],l),r.length+l.length):0:(h([...r],l),r.length):0};return{inDropZone:u,onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{if(e.preventDefault(),e.stopPropagation(),s)return!1;c(!1)},onDragOver:e=>{if(e.preventDefault(),e.stopPropagation(),s)return!1;c(!0),e.dataTransfer.dropEffect="copy"},onDragStart:e=>{e.dataTransfer.clearData()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),s)return!1;const{files:t}=e.dataTransfer;D([...t])>0&&(g(!0),i(!0)),c(!1)},setInDropZone:c,setShowPreviewer:g,addTargetFiles:D,showPreviewer:p,fileStatuses:l,setFileStatuses:f}}export{a as default};
