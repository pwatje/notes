import{jsx as s,Fragment as e}from"react/jsx-runtime";import*as i from"react";import{configureComponent as o}from"@aws-amplify/ui";import{AuthenticatorProvider as r,useAuthenticator as t,useAuthenticatorInitMachine as n}from"@aws-amplify/ui-react-core";import{CustomComponentsContext as m}from"./hooks/useCustomComponents/index.js";import"../../primitives/View/View.js";import{Router as a}from"./Router/Router.js";import{SetupTOTP as p}from"./SetupTOTP/SetupTOTP.js";import{SignIn as u}from"./SignIn/SignIn.js";import{SignUp as c}from"./SignUp/SignUp.js";import{ForceNewPassword as f}from"./ForceNewPassword/ForceNewPassword.js";import"./ResetPassword/ConfirmResetPassword.js";import{ResetPassword as d}from"./ResetPassword/ResetPassword.js";import{defaultComponents as g}from"./hooks/useCustomComponents/defaultComponents.js";import{VERSION as l}from"../../version.js";function j({children:o,className:r,components:p,formFields:u,hideSignUp:c,initialState:f,loginMechanisms:d,signUpAttributes:l,services:j,socialProviders:w,variation:P}){const{route:S,signOut:v,user:h}=t((({route:s,signOut:e,user:i})=>[s,e,i]));n({initialState:f,loginMechanisms:d,services:j,signUpAttributes:l,socialProviders:w,formFields:u});const O=i.useMemo((()=>({components:Object.assign(Object.assign({},g),p)})),[p]);return"authenticated"===S||"signOut"===S?o?s(e,{children:"function"==typeof o?o({signOut:v,user:h}):o}):null:s(m.Provider,Object.assign({value:O},{children:s(a,{className:r,hideSignUp:c,variation:P})}))}function w(e){return i.useEffect((()=>{o({packageName:"@aws-amplify/ui-react",version:l})}),[]),s(r,{children:s(j,Object.assign({},e))})}w.Provider=r,w.ResetPassword=d,w.SetupTOTP=p,w.SignIn=u,w.SignUp=c,w.ForceNewPassword=f;export{w as Authenticator,j as AuthenticatorInternal};
