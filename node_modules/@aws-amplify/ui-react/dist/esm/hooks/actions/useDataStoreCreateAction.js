import{__awaiter as e}from"tslib";import{Hub as s,DataStore as t}from"aws-amplify";import{UI_CHANNEL as o,ACTION_DATASTORE_CREATE_STARTED as i,EVENT_ACTION_DATASTORE_CREATE as a,ACTION_DATASTORE_CREATE_FINISHED as r}from"./constants.js";import{getErrorMessage as m}from"../../helpers/utils.js";import{AMPLIFY_SYMBOL as d}from"../../helpers/constants.js";import{useTypeCastFields as n}from"./shared/useTypeCastFields.js";const l=({model:l,fields:p,schema:c})=>{const f=n({fields:p,modelName:l.name,schema:c});return()=>e(void 0,void 0,void 0,(function*(){try{s.dispatch(o,{event:i,data:{fields:f}},a,d);const e=yield t.save(new l(f));s.dispatch(o,{event:r,data:{fields:f,item:e}},a,d)}catch(e){s.dispatch(o,{event:r,data:{fields:f,errorMessage:m(e)}},a,d)}}))};export{l as useDataStoreCreateAction};
