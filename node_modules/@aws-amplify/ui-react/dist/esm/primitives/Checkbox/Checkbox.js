import{__rest as e}from"tslib";import{jsx as t,jsxs as s}from"react/jsx-runtime";import*as a from"react";import o from"classnames";import{Flex as d}from"../Flex/Flex.js";import{ComponentClassNames as i}from"../shared/constants.js";import"../View/View.js";import{IconCheck as c}from"../Icon/icons/IconCheck.js";import{IconIndeterminate as r}from"../Icon/icons/IconIndeterminate.js";import{Input as n}from"../Input/Input.js";import{Text as l}from"../Text/Text.js";import{VisuallyHidden as m}from"../VisuallyHidden/VisuallyHidden.js";import{getTestId as b}from"../utils/testUtils.js";import{useStableId as h}from"../utils/useStableId.js";import{useCheckbox as u}from"./useCheckbox.js";import{splitPrimitiveProps as k}from"../shared/styleUtils.js";import{classNameModifierByFlag as p}from"../shared/utils.js";const f=a.forwardRef(((f,C)=>{var{checked:x,className:I,defaultChecked:j,hasError:y,isDisabled:N,isIndeterminate:g,label:B,labelHidden:F,labelPosition:H,onChange:V,testId:D,inputStyles:E}=f,O=e(f,["checked","className","defaultChecked","hasError","isDisabled","isIndeterminate","label","labelHidden","labelPosition","onChange","testId","inputStyles"]);const{styleProps:S,rest:v}=k(O),w=void 0!==x?x:j,{dataChecked:P,dataFocus:L,onBlur:T,onChange:U,onFocus:q,setDataChecked:M}=u(w,V);a.useEffect((()=>{void 0!==x&&x!==P&&M(x)}),[x,P,M]);const R=h();a.useEffect((()=>{document.querySelector(`[data-id="${R}"]`).indeterminate=g}),[R,g]);const $=b(D,i.CheckboxButton),z=b(D,i.CheckboxIcon),A=b(D,i.CheckboxLabel),G=o(i.CheckboxButton,p(i.CheckboxButton,"disabled",N),p(i.CheckboxButton,"error",y),p(i.CheckboxButton,"focused",L)),J=o(i.CheckboxIcon,p(i.CheckboxIcon,"checked",P),p(i.CheckboxIcon,"disabled",N)),K=a.useMemo((()=>g?t(r,{className:o(J,p(i.CheckboxIcon,"indeterminate",g)),"data-testid":z}):t(c,{className:J,"data-checked":P,"data-disabled":N,"data-testid":z})),[P,J,z,N,g]);return s(d,Object.assign({as:"label",className:o(i.Checkbox,p(i.Checkbox,"disabled",N),I),"data-disabled":N,"data-label-position":H,testId:D},S,{children:[t(m,{children:t(n,Object.assign({checked:x,className:i.CheckboxInput,"data-id":R,defaultChecked:j,isDisabled:N,onBlur:T,onChange:U,onFocus:q,ref:C,type:"checkbox"},v))}),B&&t(l,Object.assign({as:"span",className:o(i.CheckboxLabel,{[i.VisuallyHidden]:F}),"data-disabled":N,testId:A},{children:B})),t(d,Object.assign({"aria-hidden":"true",as:"span",className:G,"data-checked":P,"data-disabled":N,"data-focus":L,"data-error":y,testId:$},E,{children:K}))]}))}));f.displayName="Checkbox";export{f as Checkbox};
