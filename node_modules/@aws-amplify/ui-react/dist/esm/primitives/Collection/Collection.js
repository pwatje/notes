import{__rest as e}from"tslib";import{jsx as s,jsxs as t}from"react/jsx-runtime";import r from"classnames";import a from"lodash/debounce";import*as i from"react";import{Flex as l}from"../Flex/Flex.js";import{Grid as o}from"../Grid/Grid.js";import{Text as n}from"../Text/Text.js";import{Pagination as c}from"../Pagination/Pagination.js";import{usePagination as m}from"../Pagination/usePagination.js";import{SearchField as d}from"../SearchField/SearchField.js";import{ComponentClassNames as h,ComponentText as u}from"../shared/constants.js";import{strHasLength as g}from"../shared/utils.js";import{getPageCount as p,getItemsAtPage as j,itemHasText as b}from"./utils.js";const f=10,P=t=>{var{children:r,direction:a="column",items:i}=t,o=e(t,["children","direction","items"]);return s(l,Object.assign({direction:a},o,{children:Array.isArray(i)?i.map(r):null}))},C=t=>{var{children:r,items:a}=t,i=e(t,["children","items"]);return s(o,Object.assign({},i,{children:Array.isArray(a)?a.map(r):null}))},N=(e,t,r)=>t.length?e:r||s(l,Object.assign({justifyContent:"center"},{children:s(n,{children:u.Collection.searchNoResultsFound})})),y=o=>{var{className:n,isSearchable:y,isPaginated:F,items:O,itemsPerPage:x=f,searchFilter:A=b,searchLabel:S=u.Collection.searchButtonLabel,searchNoResultsFound:I,searchPlaceholder:v,type:L="list",testId:R}=o,G=e(o,["className","isSearchable","isPaginated","items","itemsPerPage","searchFilter","searchLabel","searchNoResultsFound","searchPlaceholder","type","testId"]);const[T,k]=i.useState(),B=i.useCallback(a(k,300),[k]);O=Array.isArray(O)?O:[],y&&g(T)&&(O=O.filter((e=>A(e,T))));const q=m({totalPages:p(O.length,x)});F&&(O=j(O,q.currentPage,x));const w="list"===L?s(P,Object.assign({className:h.CollectionItems,items:O},G)):"grid"===L?s(C,Object.assign({className:h.CollectionItems,items:O},G)):null;return t(l,Object.assign({testId:R,className:r(h.Collection,n)},{children:[y?s(l,Object.assign({className:h.CollectionSearch},{children:s(d,{label:S,placeholder:v,onChange:e=>B(e.target.value),onClear:()=>k("")})})):null,N(w,O,I),F?s(l,Object.assign({className:h.CollectionPagination},{children:s(c,Object.assign({},q))})):null]}))};y.displayName="Collection";export{y as Collection};
